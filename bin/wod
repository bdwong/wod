#!/bin/bash -e
# wod: WordPress on disposable Docker containers.
#
# wod [command] [options]
#
# Commands are:
#
# create - create a new wod instance
# ls	 - list wod instances
# rm	 - remove wod instance
# restore - restore from backup onto existing wod instance
# up - start up an existing wod instance
# down - shut down an existing wod instance
#
# Try "wod help [command]" to get help on a command.

# Add 'eval wod_bootstrap' to your .bashrc file.
function wod_bootstrap () {
	echo 'export SCRIPT_HOME=${SCRIPT_HOME:-/usr/lib/wod/bin}; '
	echo 'function wp () { ${SCRIPT_HOME}/wp "$@"; }'
}

eval `wod_bootstrap`

. $SCRIPT_HOME/functions
wod_init

if [ -z "$1" ]; then
	print_help $0
	exit
fi

command=$1
shift

if [ "$command" == "bootstrap" ]; then
	wod_bootstrap
	exit
elif [ -e $SCRIPT_HOME/wod-${command} ]; then
	$SCRIPT_HOME/wod-${command} "$@"
else
	echo "Invalid command '${command}'."
	print_help $0
	exit 1
fi
