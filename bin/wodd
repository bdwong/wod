#!/bin/bash
# wodd: WordPress on Disposable Docker container.
#
# Create a new wordpress docker image in the working directory.
# Usage:
#
# wodd [container-name [backup-prefix]] -

# Set defaults
TEMPLATE_DIR=/usr/lib/wodd/template/default
TARGET_NAME=container

# Override defaults with user configuration
if [ -f $HOME/.config/wodd/wodd.conf ]; then
    export $(grep -v '^#' $HOME/.config/wodd/wodd.conf | xargs -d '\n') &>/dev/null
fi

# Override configuration with command line arguments.
TARGET_NAME=${1:=$TARGET_NAME}
BACKUP_PREFIX=${2:=$BACKUP_PREFIX}

# Copy tempate to DOCKER_COMPOSE_DIR

mkdir -p ${TARGET_NAME}
cp -r ${TEMPLATE_DIR}/* ${TARGET_NAME}/

# TODO: Modify the tempate for the wordpress version, php version, mysql version.

